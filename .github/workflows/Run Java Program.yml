name: Run Java Program

on: workflow_dispatch

jobs:
  run-java:
    runs-on: ubuntu-latest
    steps:
    
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Setup Java JDK
        uses: actions/setup-java@v3.14.1
        with:
          java-version: '17'
          distribution: microsoft
      - name: Print Java version
        run: java -version
      
      - name: Print Repo Name
        run: | 
          echo 'Repo Name ${{github.repository}}'
          echo 'Repo Id ${{github.repository_id}}'
          echo 'Repo url ${{github.repositoryUrl}}'
          echo 'Repo token ${{github.token}}'
          echo 'Workflow Name ${{github.workflow}}'
          echo 'Actor ${{github.actor}}'
          echo 'Ref Details ${{github.ref}}'
          echo 'Trigger event ${{github.event_name}}'
          echo 'Run id${{github.run_id}}'
          echo 'Run number ${{github.run_number}}'

      - name: Compile Java Code
        if: github.event_name == 'workflow_dispatch' && github.ref == 'refs/head/main' && github.actor == 'aggarwalSparsh'
        run: javac src/HelloWorld.java

      - name: Run Java Program
        run: java -cp src HelloWorld
